# Mindb Server Configuration Example
# Copy this file to .env and customize for your environment

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# Data directory (REQUIRED)
MINDB_DATA_DIR=./data

# ============================================================================
# TLS/HTTPS CONFIGURATION
# ============================================================================

# Enable TLS/HTTPS (recommended for production)
ENABLE_TLS=false

# Path to TLS certificate file (required if ENABLE_TLS=true)
TLS_CERT_FILE=./certs/server.crt

# Path to TLS private key file (required if ENABLE_TLS=true)
TLS_KEY_FILE=./certs/server.key

# Redirect HTTP to HTTPS (requires ENABLE_TLS=true)
TLS_REDIRECT_HTTP=false

# HTTP port to redirect from (default: 80)
TLS_REDIRECT_PORT=80

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Server listen address
# Examples:
#   :8080        - Listen on all interfaces, port 8080
#   :443         - Listen on all interfaces, port 443 (HTTPS)
#   localhost:8080 - Listen only on localhost
HTTP_ADDR=:8080

# Read timeout (how long to wait for request body)
READ_TIMEOUT=30s

# Write timeout (how long to wait for response write)
WRITE_TIMEOUT=30s

# Idle timeout (how long to keep idle connections)
IDLE_TIMEOUT=120s

# Graceful shutdown timeout
SHUTDOWN_GRACE=30s

# ============================================================================
# AUTHENTICATION
# ============================================================================

# Disable authentication (NOT recommended for production)
AUTH_DISABLED=false

# API key for backward compatibility (optional)
# API_KEY=your-secret-api-key-here

# Session timeout (default: 15m)
SESSION_TIMEOUT=15m

# Session signing key (leave empty for auto-generated)
# For production, use a strong random key:
#   openssl rand -base64 32
SESSION_SIGNING_KEY=

# ============================================================================
# PERFORMANCE & LIMITS
# ============================================================================

# Maximum concurrent query executions
EXEC_CONCURRENCY=32

# Statement timeout in milliseconds
STMT_TIMEOUT_MS=2000

# Transaction idle timeout in milliseconds
TX_IDLE_TIMEOUT_MS=60000

# Maximum open transactions
MAX_OPEN_TX=100

# Maximum transactions per client
MAX_TX_PER_CLIENT=5

# ============================================================================
# OBSERVABILITY
# ============================================================================

# Enable Prometheus metrics endpoint
ENABLE_METRICS=true

# Log level: debug, info, warn, error
LOG_LEVEL=info

# ============================================================================
# PRODUCTION EXAMPLE
# ============================================================================

# Uncomment and customize for production deployment:

# MINDB_DATA_DIR=/var/lib/mindb
# ENABLE_TLS=true
# TLS_CERT_FILE=/etc/letsencrypt/live/yourdomain.com/fullchain.pem
# TLS_KEY_FILE=/etc/letsencrypt/live/yourdomain.com/privkey.pem
# TLS_REDIRECT_HTTP=true
# HTTP_ADDR=:443
# AUTH_DISABLED=false
# EXEC_CONCURRENCY=64
# LOG_LEVEL=warn

# ============================================================================
# DEVELOPMENT EXAMPLE
# ============================================================================

# Uncomment for local development:

# MINDB_DATA_DIR=./dev-data
# ENABLE_TLS=false
# HTTP_ADDR=:8080
# AUTH_DISABLED=true
# LOG_LEVEL=debug
# EXEC_CONCURRENCY=8

# ============================================================================
# DOCKER EXAMPLE
# ============================================================================

# For Docker deployments:

# MINDB_DATA_DIR=/data
# ENABLE_TLS=true
# TLS_CERT_FILE=/certs/server.crt
# TLS_KEY_FILE=/certs/server.key
# HTTP_ADDR=:8443
# LOG_LEVEL=info
